!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("url-search-params-polyfill"),require("axios")):"function"==typeof define&&define.amd?define(["url-search-params-polyfill","axios"],t):"object"==typeof exports?exports["ridingWind-jiniu-statistics"]=t(require("url-search-params-polyfill"),require("axios")):e["ridingWind-jiniu-statistics"]=t(e["url-search-params-polyfill"],e.axios)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}return i("next")})}}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function a(e){var t=e.url,n=e.method,i=e.data,a={"Content-Type":"application/json"};return(0,s.default)({timeout:3e3,headers:a,url:t,method:n,data:i}).then(r).catch(function(e){})}Object.defineProperty(t,"__esModule",{value:!0}),t.jnEvent=t.jnSignin=void 0,n(2);var o=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u="http://media.jiniutech.com/html/jn-uuid/index.html";t.jnSignin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,o=void 0===r?"":r,s=e.channel,d=void 0===s?"official":s,c=!0,f=new Date,l=f.getFullYear(),p=f.getMonth()+1<10?"0"+(f.getMonth()+1):""+(f.getMonth()+1),m=f.getDate()<10?"0"+f.getDate():""+f.getDate(),v=+(l+p+m),g=+window.localStorage.getItem("RidingWind"+o);if(v>g){if(document.getElementById("iframe-"+o))window.frames[0].postMessage("getUUID",u);else{var h=document.createElement("iframe");h.src=u,h.style.display="none",h.setAttribute("frameborder","0"),h.setAttribute("id","iframe-"+o),document.body.appendChild(h),setTimeout(function(){window.frames[0].postMessage("getUUID",u)},800)}window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.localUUIDRidingWind){e.next=9;break}if(i=t.data.localUUIDRidingWind,!c){e.next=9;break}return c=!1,e.next=6,a({url:n+"/statistics-service/statistics/signin",method:"POST",data:{appid:o,channel:d,uuid:i}});case 6:r=e.sent,s=r.data.success,s&&window.localStorage.setItem("RidingWind"+o,v);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},t.jnEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,o=void 0===r?"":r,s=e.channel,d=void 0===s?"official":s,c=e.type,f=void 0===c?1:c,l=e.name,p=void 0===l?"":l,m=e.value,v=void 0===m?"":m,g=!0,h=1===f?{}:{value:v};if(document.getElementById("iframe-"+o))window.frames[0].postMessage("getUUID",u);else{var x=document.createElement("iframe");x.src=u,x.style.display="none",x.setAttribute("frameborder","0"),x.setAttribute("id","iframe-"+o),document.body.appendChild(x),setTimeout(function(){window.frames[0].postMessage("getUUID",u)},800)}window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.localUUIDRidingWind){e.next=6;break}if(i=t.data.localUUIDRidingWind,!g){e.next=6;break}return g=!1,e.next=6,a({url:n+"/statistics-service/statistics/event",method:"POST",data:Object.assign({appid:o,channel:d,type:f,name:p,uuid:i},h)});case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});