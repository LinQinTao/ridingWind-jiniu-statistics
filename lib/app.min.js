!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("url-search-params-polyfill"),require("axios")):"function"==typeof define&&define.amd?define(["url-search-params-polyfill","axios"],t):"object"==typeof exports?exports["ridingWind-jiniu-statistics"]=t(require("url-search-params-polyfill"),require("axios")):e["ridingWind-jiniu-statistics"]=t(e["url-search-params-polyfill"],e.axios)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}return i("next")})}}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function o(e){var t=e.url,n=e.method,i=e.data,o={"Content-Type":"application/json"};return(0,s.default)({timeout:3e3,headers:o,url:t,method:n,data:i}).then(r).catch(function(e){})}Object.defineProperty(t,"__esModule",{value:!0}),t.jnEvent=t.jnSignin=void 0,n(2);var a=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u="http://media.jiniutech.com/html/jn-uuid/index.html";t.jnSignin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,a=void 0===r?"":r,s=e.channel,d=void 0===s?"official":s,c=new Date,l=c.getFullYear(),f=c.getMonth()+1<10?"0"+(c.getMonth()+1):""+(c.getMonth()+1),p=c.getDate()<10?"0"+c.getDate():""+c.getDate(),m=+(l+f+p),v=+window.localStorage.getItem("RidingWind"+a);if(m>v){if(document.getElementById("iframe-"+a))window.frames[0].postMessage("getUUID",u);else{var g=document.createElement("iframe");g.src=u,g.style.display="none",g.setAttribute("frameborder","0"),g.setAttribute("id","iframe-"+a),document.body.appendChild(g)}window.onload=function(){window.frames[0].postMessage("getUUID",u)},window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.localUUIDRidingWind){e.next=7;break}return i=t.data.localUUIDRidingWind,e.next=4,o({url:n+"/statistics-service/statistics/signin",method:"POST",data:{appid:a,channel:d,uuid:i}});case 4:r=e.sent,s=r.data.success,s&&window.localStorage.setItem("RidingWind"+a,m);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},t.jnEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,a=void 0===r?"":r,s=e.channel,d=void 0===s?"official":s,c=e.type,l=void 0===c?1:c,f=e.name,p=void 0===f?"":f,m=e.value,v=void 0===m?"":m,g=1===l?{}:{value:v};if(document.getElementById("iframe-"+a))window.frames[0].postMessage("getUUID",u);else{var h=document.createElement("iframe");h.src=u,h.style.display="none",h.setAttribute("frameborder","0"),h.setAttribute("id","iframe-"+a),document.body.appendChild(h)}window.onload=function(){window.frames[0].postMessage("getUUID",u)},window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.localUUIDRidingWind){e.next=4;break}return i=t.data.localUUIDRidingWind,e.next=4,o({url:n+"/statistics-service/statistics/event",method:"POST",data:Object.assign({appid:a,channel:d,type:l,name:p,uuid:i},g)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});