!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("url-search-params-polyfill"),require("axios")):"function"==typeof define&&define.amd?define(["url-search-params-polyfill","axios"],t):"object"==typeof exports?exports["ridingWind-jiniu-statistics"]=t(require("url-search-params-polyfill"),require("axios")):e["ridingWind-jiniu-statistics"]=t(e["url-search-params-polyfill"],e.axios)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,o){try{var a=t[r](o),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){i("next",e)},function(e){i("throw",e)});e(u)}return i("next")})}}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function o(e){var t=e.url,n=e.method,i=e.data,o={"Content-Type":"application/json"};return(0,u.default)({timeout:3e3,headers:o,url:t,method:n,data:i}).then(r).catch(function(e){})}Object.defineProperty(t,"__esModule",{value:!0}),t.jnEvent=t.jnSignin=void 0,n(2);var a=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(a);t.jnSignin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,a=void 0===r?"":r,u=e.channel,s=void 0===u?"official":u,c=new Date,d=c.getFullYear(),l=c.getMonth()+1<10?"0"+(c.getMonth()+1):""+(c.getMonth()+1),f=c.getDate()<10?"0"+c.getDate():""+c.getDate(),p=+(d+l+f),m=+window.localStorage.getItem("RidingWind"+a);if(p>m){var h=document.createElement("iframe"),v="http://media.jiniutech.com/html/jn-uuid/index.html";h.src=v,h.style.display="none",h.setAttribute("frameborder","0"),document.body.appendChild(h),window.onload=function(){window.frames[0].postMessage("getUUID",v)},window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i,r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.data){e.next=7;break}return i=t.data,e.next=4,o({url:n+"/statistics-service/statistics/signin",method:"POST",data:{appid:a,channel:s,uuid:i}});case 4:r=e.sent,u=r.data.success,u&&window.localStorage.setItem("RidingWind"+a,p);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},t.jnEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,n=void 0===t?"http://api.test.jiniutech.cn":t,r=e.appid,a=void 0===r?"":r,u=e.channel,s=void 0===u?"official":u,c=e.type,d=void 0===c?1:c,l=e.name,f=void 0===l?"":l,p=e.value,m=void 0===p?"":p,h=1===d?{}:{value:m},v=document.createElement("iframe"),g="http://media.jiniutech.com/html/jn-uuid/index.html";v.src=g,v.style.display="none",v.setAttribute("frameborder","0"),document.body.appendChild(v),window.onload=function(){window.frames[0].postMessage("getUUID",g)},window.addEventListener("message",function(){var e=i(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.data){e.next=4;break}return i=t.data,e.next=4,o({url:n+"/statistics-service/statistics/event",method:"POST",data:Object.assign({appid:a,channel:s,type:d,name:f,uuid:i},h)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!1)}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});